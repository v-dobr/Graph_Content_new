# <a name="microsoft-graph-permission-scopes"></a>Microsoft Graph のアクセス許可スコープ

Microsoft Graph は、アプリがリソースに対して持つアクセス権を制御するために使用される、OAuth 2.0 のアクセス許可スコープを公開しています。開発者は、アプリが必要とするアクセス権に合ったアクセス許可スコープを指定する必要があります。(Azure AD 認証を使用している場合は、通常 Azure 管理ポータルを通してこれを行います。Azure AD v2.0 エンドポイントを使用している場合は、実行時間中に動的にアクセス許可を要求します。)

サインイン後、ユーザーまたは管理者には、構成されているアクセス許可スコープでアプリがリソースにアクセスできるようにすることに同意する機会が与えられます。このため、アプリが必要とする最低レベルの特権を提供するアクセス許可スコープを選ぶ必要があります。アプリのアクセス許可を構成する方法と同意プロセスの詳細については、「<a href="https://azure.microsoft.com/en-us/documentation/articles/active-directory-integrating-applications/" target="_newtab">アプリケーションを Azure Active Directory と統合する</a>」をご覧ください。

>**注:**グループやタスクなどに関係するいくつかの Microsoft Graph アクセス許可は、個人用のアカウントには適用されません。  

##<a name="app-only-vs.-delegated-scopes"></a>アプリ専用スコープ vs. 委任されたスコープ
アクセス許可スコープは、アプリ専用スコープまたは委任されたスコープのいずれかに指定できます。アプリ専用スコープ (アプリケーション ロールとも呼ばれます) では、スコープによって提供されるすべての特権がアプリに付与されます。通常、アプリ専用スコープは、サインイン中のユーザーが不在でもサービスとして実行されるアプリによって使用されます。 


委任されたアクセス許可スコープは、ユーザーに代わって動作するアプリを対象にしています。これらのスコープでは、サインインしているユーザーの特権が委任され、アプリはユーザーとして動作できるようになります。アプリに実際に付与される特権は、スコープによって付与された特権とサインインしているユーザーが所有する特権を組み合わせた最低限の特権 (共通部分) になります。たとえば、アクセス許可のスコープによって、すべてのディレクトリ オブジェクトの書き込みのための委任された特権が付与されているものの、サインしているユーザーが自分自身のユーザー プロファイルを更新するための特権しか持っていない場合、アプリはサインインしているユーザーのプロファイルの書き込みのみができ、他のオブジェクトの書き込みはできません。

## <a name="full-and-basic-profiles-for-users-and-groups"></a>ユーザーおよびグループの完全なプロファイルと基本プロファイル

ユーザーまたはグループの完全なプロファイル (またはプロファイル) には、エンティティの宣言済みプロパティがすべて含まれています。プロファイルには機密性の高いディレクトリ情報、または個人情報 (PII) が含まれている可能性があるため、いくつかのスコープは、アプリのアクセスを基本プロファイルと呼ばれる限られたプロパティだけに制限しています。ユーザーの場合、基本プロファイルには次のプロパティのみが含まれます。 

- 表示名
- 名、姓
- 写真
- メール アドレス

グループの場合、基本プロファイルには表示名のみが含まれます。 

<!---   <a name="msg_perm_details"> </a>  -->

## <a name="permission-scope-details"></a>アクセス許可スコープの詳細

Microsoft Graph リソースにアクセスするための必要なアクセス許可を持つようにアプリを構成する必要があります。アクセス許可は、個々のリソースへの読み取り、書き込み、またはその両方を行う権利に関してスコープ指定されます。 

次の表では、Microsoft Graph のアクセス許可スコープを一覧表示し、各スコープによって付与されるアクセス権を説明します。 

- **スコープ**列にはスコープ名が一覧表示されます。スコープ名の形式は、resource.operation.constraint です。たとえば、Group.ReadWrite.All となります。constraint が "All" の場合、スコープはアプリに対し、ディレクトリのすべての指定されたリソース (Group) の操作 (ReadWrite) を実行できる権限を付与します。それ以外の場合は、スコープはサインインしているユーザーのプロファイルの操作のみを許可します。スコープによっては、指定された操作に対して制限された特権を与える可能性があります。詳しくは、**説明**の列をご覧ください。
- **アクセス許可**の列には、Azure ポータルにスコープがどのように表示されるかを示します。 
- **説明**の列では、スコープが与える権限の完全なセットについて説明します。委任されたスコープの場合、アプリに実際に付与されるアクセス権は、スコープによって付与されたアクセス権とサインインしているユーザー特権の最低限の特権の結合 (交差部分) になります。 
- スコープはアクセス許可が管理者の同意を必要とするかどうかに基づいてグループ化されます。

  > **注**:`v1.0` および `beta` のアクセス許可スコープの制限事項については、「[既知の問題](../overview/release_notes)」をご覧ください。
  
###<a name="permissions-requiring-administrator's-consent"></a>管理者の同意が必要なアクセス許可

|   **スコープ**                  |  **アクセス許可**                          |  **説明** |
|:-----------------------------|:-----------------------------------------|:-----------------|
| _User.Read.All_                |     すべてのユーザーの完全なプロファイルの読み取り           | User.ReadBasic.All とほぼ同じですが、異なる点は、アプリがマネージャーや直属の部下などナビゲーション プロパティを読み取る場合に、組織のすべてのユーザーの完全なプロファイルを読み取ることが可能になることです。完全なプロファイルには、**ユーザー** エンティティの宣言されたプロパティがすべて含まれます。ユーザーがメンバーになっているグループを読み取るためには、アプリにさらに Group.Read.All または Group.ReadWrite.All のいずれかが必要となります。 |
| _User.ReadWrite.All_           |     すべてのユーザーの完全なプロファイルの読み取りと書き込み | アプリで、サインインしているユーザーの代わりに、組織内の他のユーザーのプロファイル プロパティ、部下、上司の完全なセットを読み書きできるようにします。 |
| _Directory.Read.All_           |     ディレクトリ データの読み取り                     | アプリで、ユーザー、グループ、アプリなどの組織のディレクトリ内のデータを読み取ることができるようにします。 |
| _Directory.ReadWrite.All_      |     ディレクトリ データの読み取りと書き込み           | アプリで、ユーザーやグループなどの組織のディレクトリ内のデータを読み書きできるようにします。ユーザーまたはグループの削除はできません。アプリでユーザーまたはグループの削除や、ユーザー パスワードのリセットはできません。 |
| _Directory.AccessAsUser.All_   |     ディレクトリに対するサインインしたユーザーと同じアクセス  | アプリが、ディレクトリ内の情報に対し、サインインしているユーザーと同じアクセス権を持てるようにします。|
| _Group.Read.All_ |    すべてのグループの読み取り | アプリで、サインインしているユーザーの代わりに、グループを一覧表示し、グループのプロパティとすべてのグループ メンバーシップを読み取ることができるようにします。アプリで、サインインしているユーザーがアクセスできるすべてのグループの予定表、会話、ファイル、およびその他のグループのコンテンツを読み取ることができるようにします。 |
| _Group.ReadWrite.All_ |    すべてのグループの読み取りと書き込み| アプリで、サインインしているユーザーの代わりに、グループを作成したり、すべてのグループのプロパティとメンバーシップを読み取ったりできるようにします。さらに、グループの所有者が自身のグループを管理できるよう、またグループ メンバーがグループのコンテンツを更新できるようにします。 |


###<a name="permissions-not-requiring-administrator's-consent"></a>管理者の同意が必要でないアクセス許可

|   **スコープ**    |  **アクセス許可**   |  **説明** |
|:-----------------------------|:-----------------------------------------|:-----------------|
| _User.Read_       |    サインインとユーザー プロファイルの読み取り | ユーザーがアプリにサインインできるようにします。またサインインしているユーザーのプロファイルをアプリで読み取ることができるようにします。完全なプロファイルには、ユーザー エンティティの宣言されたプロパティがすべて含まれます。アプリは、上司や直属の部下などのナビゲーション プロパティを読み取ることができません。さらに、サインインしているユーザーの次の基本的な会社情報も (**TenantDetail** オブジェクトを通じて) 読み取ることができるようにします: テナント ID、テナントの表示名、検証済みのドメイン。|
| _User.ReadWrite_ |    ユーザーのプロファイルの読み取りおよび書き込みアクセス許可 | アプリはユーザーのプロファイルを読み取ることができます。また、アプリはユーザーの代わりにプロファイル情報を更新することもできます。 |
| _User.ReadBasic.All_ |    すべてのユーザーの基本プロファイルの読み取り | アプリで、サインインしているユーザーの代わりに、組織内のすべてのユーザーの基本的なプロファイルを読み取ることができるようにします。次のプロパティは、ユーザーの基本プロファイルが含まれます: 表示名、氏名、写真、メール アドレス。ユーザーがメンバーになっているグループを読み取るためには、アプリにさらに Group.Read.All または Group.ReadWrite.All が必要となります。| 
| _Mail.Read_ |    ユーザー メールの読み取り | アプリで、ユーザー メールボックス内のメールを読み取ることができるようにします。 |
| _Mail.ReadWrite_ |    ユーザーのメールの読み取りおよび書き込みアクセス許可 | アプリで、ユーザー メールボックス内のメールの作成、読み取り、更新、削除を行えるようにします。メールを送信するためのアクセス許可は含まれません。|
| _Mail.Send_ |    ユーザーからのメールとして送信 | アプリで、組織内のユーザーとしてメールを送信できるようにします。 |
| _Calendars.Read_ |    ユーザーのカレンダーの読み取り  | アプリで、ユーザーのカレンダー内のイベントを読み取ることができるようにします。|
| _Calendars.ReadWrite_ |    ユーザーのカレンダーへのフル アクセス  | アプリで、ユーザーのカレンダー内のイベントの作成、読み取り、更新、削除を行えるようにします。 |
| _Contacts.Read_ |    ユーザーの連絡先の読み取り  | アプリで、ユーザーの連絡先を読み取ることができるようにします。 |
| _Contacts.ReadWrite_ |    ユーザーの連絡先へのフル アクセス  | アプリで、ユーザーの連絡先の作成、読み取り、更新、削除を行えるようにします。 |
| _Files.Read_ |    ユーザーのファイルと共有ファイルの読み取り | アプリで、サインインしているユーザーのファイルと、そのユーザーと共有されているファイルを読み取ることができるようにします。| 
| _Files.ReadWrite_ |   ユーザーのファイルと共有ファイルのフル アクセス | アプリで、サインインしているユーザーのファイルと、そのユーザーと共有されているファイルの読み取り、作成、更新、削除を行えるようにします。 |
| _Files.ReadWrite.Selected_ |    ユーザーが選んだファイルの読み取りと書き込み | アプリでユーザーが選ぶファイルを読み書きできるようにします。ユーザーがファイルを選んだ後、アプリで数時間アクセスできます。 |
| _Files.Read.Selected_ |    ユーザーが選んだファイルの読み取り  | アプリでユーザーが選ぶファイルを読み取ることができるようにします。ユーザーがファイルを選んだ後、アプリで数時間アクセスできます。 |
| _Sites.Read.All_ |    すべてのサイト コレクションにあるアイテムの読み取り | アプリケーションで、サインインしているユーザーの代わりに、すべてのサイト コレクションにあるドキュメントおよびリスト アイテムを読み取ることができるようにします。 |
| _openid_ |    ユーザーのサインイン (プレビュー) | ユーザーが職場または学校アカウントでアプリにサインインできるようにします。またアプリで、ユーザーの基本的なプロファイル情報を読み取れるようにします。|
| _offline_access_ |    ユーザーのデータへの常時アクセス (プレビュー) | 現在アプリを使用していない場合も、アプリでユーザー データの読み取りと更新ができるようにします。|

###<a name="app-only-permissions-requiring-administrator's-consent"></a>管理者の同意が必要なアプリ専用のアクセス許可

|   **スコープ**    |  **アクセス許可**   |  **説明** |
|:---------------|:------------------|:-----------------|
| _Mail.Read_       |    すべてのメールボックスにあるメールの読み取り | サインインしているユーザーなしで、アプリですべてのメールボックス内のメールを読み取れるようにします。|
| _Mail.ReadWrite_ |    すべてのメールボックスにあるメールの読み取りと書き込み | サインインしているユーザーなしで、アプリですべてのメールボックス内のメールの作成、読み取り、更新、削除を行えるようにします。メールを送信するためのアクセス許可は含まれません。 |
| _Mail.Send_ |    任意のユーザーからのメールを送信 | サインインしているユーザーなしで、アプリで任意のユーザーとしてメールを送信できるようにします。 | 
| _Calendars.Read_ |    すべてのメールボックスにあるカレンダーの読み取り | サインインしているユーザーなしで、アプリですべてのカレンダーのイベントを読み取ることができるようにします。 |
| _Calendars.ReadWrite_ |    すべてのメールボックスにあるカレンダーの読み取りと書き込み | サインインしているユーザーなしで、アプリですべてのカレンダーのイベントを作成、読み取り、更新、削除できるようにします。|
| _Contacts.Read_ |    すべてのメールボックスにある連絡先の読み取り | サインインしているユーザーなしで、アプリですべてのメールボックス内のすべての連絡先を読み取ることができるようにします。 |
| _Contacts.ReadWrite_ |    すべてのメールボックスにある連絡先の読み取りと書き込み  |サインインしているユーザーなしで、アプリですべてのメールボックス内のすべての連絡先を作成、読み取り、更新、削除できるようにします。|
| _User.ReadBasic.All_ |    すべてのユーザーの基本プロファイルの読み取り  | サインインしているユーザーなしで、アプリで組織内の他のユーザーのプロファイル プロパティの基本的なセットを読み取ることができるようにします。表示名、氏名、写真、勤務時間外メッセージが含まれます。|
| _User.Read.All_ |    すべてのユーザーの完全なプロファイルの読み取り | サインインしているユーザーなしで、アプリで組織内の他のユーザーのプロファイル プロパティ、グループ メンバーシップ、部下、上司の完全なセットを読み取ることができるようにします。| 
| _User.ReadWrite.All_ |   すべてのユーザーの完全なプロファイルの読み取りと書き込み | サインインしているユーザーなしで、アプリで組織内の他のユーザーのプロファイル プロパティ、グループ メンバーシップ、部下、上司の完全なセットを読み書きできるようにします。|


##<a name="permission-scopes-in-preview"></a>プレビュー中のアクセス許可スコープ
###<a name="permissions-not-requiring-administrator's-consent-(preview)"></a>管理者の同意が必要でないアクセス許可 (プレビュー)

|   **スコープ**    |  **アクセス許可**   |  **説明** |
|:---------------|:------------------|:-----------------|
| _Tasks.ReadWrite_ |    ユーザーのタスクおよび計画の作成、読み取り、更新、および削除 (プレビュー) | アプリで、サインインしているユーザーに割り当てられている、またはサインしているユーザーと共有しているタスクとプラン (およびプラン内のタスク) の作成、読み取り、更新、削除を行えるようにします。|
| _People.Read_ |    ユーザーに関係する連絡先リストの読み取り (プレビュー) | アプリで、サインインしているユーザーの関連する人に関するランク付けされたリストを読み取れるようにします。リストには、個人の連絡先、ソーシャル ネットワーキングの連絡先、組織のディレクトリ、最近 (メール、Skype などで) 通信した人が含まれます。|
| _People.ReadWrite_ |    ユーザーの関連する人の一覧の読み取りと書き込み (プレビュー) | アプリで、サインインしているユーザーの関連する人に関するランク付けされたリストを読み書きできるようにします。リストには、個人の連絡先、ソーシャル ネットワーキングの連絡先、組織のディレクトリ、最近 (メール、Skype などで) 通信した人が含まれます。|
| _Notes.Create_ |    ユーザーのノートブックにページを作成する (プレビュー) | アプリで、サインインしているユーザーの代わりに、ノートブックとセクションのタイトルの読み取りと、新しいページ、ノートブック、セクションの作成を行えるようにします。|
| _Notes.ReadWrite.CreatedByApp_ |    ノートブックへの限定的なアクセス (プレビュー) | アプリで、サインインしているユーザーの代わりに、ノートブックとセクションのタイトルの読み取りと、新しいページの作成を行えるようにします。また、アプリによって作成されたページの読み取りと更新をアプリで行えるようにもします。 |
| _Notes.Read_ |    ユーザーのノートブックの読み取り (プレビュー) | サインインしているユーザーの代わりに、アプリで、OneNote のノートブックとセクションのタイトルの表示と、すべてのページの読み取りを行えるようにします。パスワードで保護されたセクションを表示することはできません。 |
| _Notes.ReadWrite_ |    ユーザーのノートブックの読み取りと書き込み (プレビュー) | サインインしているユーザーの代わりに、アプリで、ノートブックとセクションのタイトルの読み取り、すべてのページの読み取りと書き込み、および新しいページの作成を行えるようにします。 パスワードで保護されたセクションにアクセスすることはできません。 |
| _Notes.Read.All_ |    ユーザーがアクセスできるすべてのノートブックの読み取り (プレビュー) | アプリで、サインしているユーザーがアクセスできるすべてのノートブックとセクションのコンテンツを読み取れるようにします。 パスワードで保護されたセクションを読み取ることはできません。 |
| _Notes.ReadWrite.All_ |    ユーザーがアクセスできるノートブックの読み取りと書き込み (プレビュー) | アプリで、サインしているユーザーがアクセスできるすべてのノートブックとセクションのコンテンツを読み書きできるようにします。パスワードで保護されたセクションにアクセスすることはできません。|

##<a name="permission-scope-scenarios"></a>アクセス許可スコープのシナリオ
`User` と `Group` のリソース、およびそれらに対応する必須スコープを使用したアプリのシナリオを次にいくつか示します。次の表に、アプリが特定の操作を実行するために必要なアクセス許可スコープを示します。次の点にご注意ください。場合によっては、いくつかの操作を実行するためのアプリの権限はアクセス許可スコープがアプリ専用であるか、または委任されたものであるかによって異なります。また委任されたアクセス許可スコープの場合は、サインインしているユーザーの特権に応じて異なります。 

###<a name="access-scenarios-using-the-user-resource-and-the-required-scopes"></a>ユーザー リソースと必須スコープを使用したアクセス シナリオ

| **ユーザーが関与するアプリ タスク**   |  **必須スコープ** | **アクセス許可** |
|:-------------------------------|:---------------------|:---------------|
| アプリの目的は、人材選択画面への表示などのために、他のユーザーの基本情報 (表示名と写真のみ) を読み取ること   | _User.ReadBasic.All_  |  すべてのユーザーの基本プロファイルの読み取り |
| アプリの目的は、サインインしているユーザーの完全なユーザー プロファイルを読み取ること (直属の部下や上司を表示するなど)  | _User.Read_ | サインインを有効にし、ユーザー プロファイルを読み取ります|
| アプリの目的は、すべてのユーザーの完全なユーザー プロファイルを読み取ること  | _User.Read.All_ |  すべてのユーザーの完全なプロファイルの読み取り   |
| アプリの目的は、サインインしているユーザーのファイル、メール、カレンダー情報を読み取ること  | _User.Read_, _Files.Read_, _Mail.Read_, _Calendar.Read_ | サインインを有効にし、ユーザー プロファイルを読み取ります、ユーザー ファイルの読み取り、ユーザー メールの読み取り、ユーザーのカレンダーの読み取り |
| アプリの目的は、サインインしているユーザー (自分) のファイルと、サインインしているユーザー (自分) が他のユーザーから共有してもらっているファイルを読み取ること | _User.Read_, _Files.Read_, _Sites.Read.All_ | サインインを有効にし、ユーザー プロファイルを読み取ります、ユーザー ファイルの読み取り、すべてのサイト コレクションにあるアイテムの読み取り |
| アプリの目的は、サインインしているユーザーの完全なユーザー プロファイルを読み書きすること   | _User.ReadWrite_ | ユーザーのプロファイルの読み取りおよび書き込みアクセス許可 |
| アプリの目的は、すべてのユーザーの完全なユーザー プロファイルを読み書きすること    | _User.ReadWrite.All_ | すべてのユーザーの完全なプロファイルの読み取りと書き込み |
| アプリの目的は、サインインしているユーザーのファイル、メール、カレンダー情報を読み書きすること    | _User.ReadWrite_, _Files.ReadWrite_, _Mail.ReadWrite_, _Calendar.ReadWrite_  |  ユーザーのプロファイルの読み取りおよび書き込みアクセス許可、ユーザーのプロファイルの読み取りおよび書き込みアクセス許可、ユーザーのメールの読み取りおよび書き込みアクセス許可、ユーザーのカレンダーへのフル アクセス |
   

###<a name="access-scenarios-using-the-group-resource-and-the-required-scopes"></a>グループ リソースと必須スコープを使用したアクセス シナリオ
    
| **グループが関与するアプリ タスク**  |  **必須スコープ** |  **アクセス許可** |
|:-------------------------------|:---------------------|:---------------|
| アプリの目的は、グループ選択画面への表示などのために、基本グループ情報 (表示名と写真のみ) を読み取ること  | _Group.Read.All_  | すべてのグループの読み取り|
| アプリの目的は、ファイルや会話を含むすべての統合グループ内のすべてのコンテンツを読み取ること。グループ メンバーシップを表示したり、グループ メンバーシップを更新できたり (所有者の場合) する必要もあります。  |  _Group.Read.All_ | すべてのサイト コレクションにあるアイテムの読み取り、すべてのグループの読み取り|
| アプリの目的は、ファイルや会話を含むすべての統合グループ内のすべてのコンテンツを読み書きすること。グループ メンバーシップを表示したり、グループ メンバーシップを更新できたり (所有者の場合) する必要もあります。  |  _Group.ReadWrite.All_, _Sites.ReadWrite.All_ |  すべてのグループの読み取りと書き込み、すべてのサイト コレクション内のアイテムの編集または削除 |
| アプリの目的は、統合グループを検出 (検索) すること。ユーザーに特定のグループの検索と一覧表から選択できるようにし、グループに参加できるようにします。     | _Group.ReadWrite.All_ | すべてのグループの読み取りと書き込み|
| アプリの目的は、AAD グラフを経由してグループを作成すること |   _Group.ReadWrite.All_ | すべてのグループの読み取りと書き込み|
 


